<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventura Educativa - Juego de Preguntas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body onLoad="iniciarAudioLobby();" class="min-h-screen flex flex-col">
    <!-- Pantalla de bienvenida y registro de nickname -->
    <div id="pantalla-bienvenida" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-indigo-200 via-white to-pink-200 min-h-screen overflow-hidden">
        <!-- Partículas animadas -->
        <canvas id="particles-bg" class="absolute inset-0 w-full h-full pointer-events-none z-0"></canvas>
        <div class="relative z-10 bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 max-w-lg w-full animate__animated animate__fadeInDown flex flex-col items-center max-h-[90vh] overflow-y-auto">
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-600 mb-4 text-center animate__animated animate__bounceIn">¡Bienvenido a la Aventura Educativa!</h1>
            <p class="text-lg text-gray-700 mb-6 text-center animate__animated animate__fadeIn">Regístrate con tu nickname para comenzar a jugar y compite en el ranking.</p>
            <form id="form-nickname" class="flex flex-col items-center gap-4 mb-6 w-full animate__animated animate__fadeInUp">
                <input id="input-nickname" type="text" maxlength="16" placeholder="Tu nickname" class="border-2 border-indigo-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-indigo-400 text-center text-lg" required>
                <div class="flex flex-col w-full gap-2">
                    <label class="text-indigo-700 font-bold text-center">Selecciona tu género:</label>
                    <div class="flex justify-center gap-4">
                        <label class="flex flex-col items-center cursor-pointer">
                            <span class="text-3xl">♂️</span>
                            <input type="radio" name="genero" value="masculino" class="mt-1" required>
                            <span class="text-xs">Masculino</span>
                        </label>
                        <label class="flex flex-col items-center cursor-pointer">
                            <span class="text-3xl">♀️</span>
                            <input type="radio" name="genero" value="femenino" class="mt-1" required>
                            <span class="text-xs">Femenino</span>
                        </label>
                        <label class="flex flex-col items-center cursor-pointer">
                            <span class="text-3xl">🦠</span>
                            <input type="radio" name="genero" value="otro" class="mt-1" required>
                            <span class="text-xs">Otro</span>
                        </label>
                    </div>
                </div>
                <div class="w-full mt-4 p-4 bg-indigo-50 rounded-lg shadow-inner">
                    <label class="block text-indigo-700 font-bold mb-2 text-center">¡Diseña tu avatar!</label>
                    <div class="flex flex-col md:flex-row gap-4 items-center justify-center">
                        <div id="avatar-preview" class="flex flex-col items-center">
                            <!-- Avatar SVG generado dinámicamente -->
                            <svg id="avatar-svg" width="80" height="80" viewBox="0 0 80 80"></svg>
                            <span class="text-xs mt-1">Vista previa</span>
                        </div>
                        <div class="flex flex-col gap-2">
                            <label class="text-xs">Color de piel:
                                <input type="color" id="avatar-skin" value="#fcd7b6" class="ml-2">
                            </label>
                            <label class="text-xs">Color de pelo:
                                <input type="color" id="avatar-hair" value="#3e2723" class="ml-2">
                            </label>
                            <label class="text-xs">Forma de cara:
                                <select id="avatar-face" class="ml-2">
                                    <option value="normal">Normal</option>
                                    <option value="gordo">Gordo</option>
                                    <option value="flaco">Flaco</option>
                                    <option value="femenino">Más femenino</option>
                                    <option value="masculino">Más masculino</option>
                                </select>
                            </label>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-jugar px-6 py-2 rounded-lg text-white font-bold bg-indigo-500 hover:bg-indigo-700 transition-all mt-2">Entrar</button>
            </form>
            <div id="ranking-container" class="mb-4 w-full animate__animated animate__fadeInUp">
                <h2 class="text-2xl font-bold text-indigo-700 mb-2 text-center">Ranking de Jugadores</h2>
                <div class="max-h-40 sm:max-h-56 md:max-h-64 overflow-y-auto rounded-lg border border-indigo-100 bg-indigo-50/40 shadow-inner">
                    <ul id="lista-ranking" class="divide-y divide-indigo-100 text-lg"></ul>
                </div>
            </div>
        </div>

    </div>

    <!-- Modal personalizado -->
    <div id="modal-mensaje" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full text-center animate__animated animate__zoomIn">
            <h2 id="modal-titulo" class="text-2xl font-bold mb-4 text-indigo-600"></h2>
            <p id="modal-texto" class="text-lg mb-6 text-gray-700"></p>
            <button id="modal-cerrar" class="btn-jugar px-6 py-2 rounded-lg text-white font-bold bg-indigo-500 hover:bg-indigo-700">Cerrar</button>
        </div>
    </div>


    <!-- Pantalla de inicio (selección de grado) REDISEÑADA -->
    <div id="inicio" class="py-12 px-4 text-center hidden relative overflow-hidden min-h-screen flex flex-col items-center justify-center">
        <!-- Partículas animadas -->
        <canvas id="particles-bg-grados" class="absolute inset-0 w-full h-full pointer-events-none z-0"></canvas>
        <div class="max-w-5xl mx-auto relative z-10 w-full">
            <!-- El perfil del jugador ahora está dentro del cuadro principal -->
            <div class="flex flex-col md:flex-row items-center justify-between gap-8 animate__animated animate__fadeInDown">
                <div class="flex-1 flex flex-col items-center md:items-start">
                    <h1 class="titulo text-5xl md:text-6xl mb-4 text-indigo-700 font-extrabold drop-shadow-lg animate__animated animate__bounceIn">¡Elige tu Grado!</h1>
                    <p class="text-xl mb-6 text-gray-700 font-semibold animate__animated animate__fadeIn">Cada grado es un mundo de aventuras. ¡Desbloquea logros y colecciona medallas!</p>
                    <div class="flex gap-4 mb-4 animate__animated animate__fadeInUp">
                        <span class="w-24 h-24 flex items-center justify-center rounded-full shadow-lg bg-white border-4 border-pink-200 text-6xl animate__animated animate__bounceInLeft">🧒</span>
                        <span class="w-24 h-24 flex items-center justify-center rounded-full shadow-lg bg-white border-4 border-yellow-200 text-6xl animate__animated animate__bounceInRight">👧</span>
                    </div>
                </div>
                <div class="flex-1 flex flex-col items-center">
                    <div id="perfil-jugador" class="mb-4 animate__animated animate__fadeInDown"></div>
                    <div class="flex gap-2 mt-4 animate__animated animate__fadeInUp">
                        <span class="w-10 h-10 flex items-center justify-center text-3xl animate__animated animate__tada">🎖️</span>
                        <span class="w-10 h-10 flex items-center justify-center text-3xl animate__animated animate__tada animate__delay-1s">⭐</span>
                        <span class="w-10 h-10 flex items-center justify-center text-3xl animate__animated animate__tada animate__delay-2s">🏆</span>
                    </div>
                </div>
            </div>
            <div class="mt-10 animate__animated animate__fadeInUp">
                <div class="flex flex-wrap justify-center gap-8" id="grados-container">
                    <!-- Aquí se renderizan los grados dinámicamente con JS -->
                </div>
            </div>
            <div class="mt-12 flex flex-col items-center animate__animated animate__fadeInUp">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/9ce39120-3b62-4fc3-a90c-13af0bbcfeb0.png" alt="Niños celebrando" class="w-32 md:w-40 rounded-lg shadow-lg opacity-90 mb-2">
                <span class="text-indigo-500 font-bold text-lg animate__animated animate__heartBeat">¡Sigue aprendiendo y diviértete!</span>
            </div>
        </div>
        <!-- Elementos decorativos extra -->
        <span class="absolute left-4 top-4 w-16 h-16 flex items-center justify-center animate__animated animate__bounceInDown animate__delay-1s" style="z-index:2;font-size:3rem;">🏆</span>
        <span class="absolute right-4 top-8 w-12 h-12 flex items-center justify-center animate__animated animate__bounceInDown animate__delay-2s" style="z-index:2;font-size:2.5rem;">⭐</span>
        <span class="absolute left-10 bottom-8 w-12 h-12 flex items-center justify-center animate__animated animate__bounceInUp animate__delay-3s" style="z-index:2;font-size:2.5rem;">🎖️</span>
        <span class="absolute right-10 bottom-4 w-16 h-16 flex items-center justify-center animate__animated animate__bounceInUp animate__delay-4s" style="z-index:2;font-size:3rem;">🧒</span>
    </div>

    
    <!-- Pantalla de selección de materia -->
    <div id="seleccion-materia" class="hidden py-12 px-4">
        <div class="max-w-4xl mx-auto">
            <button onclick="volverAGrados()" class="mb-6 flex items-center text-indigo-600 hover:text-indigo-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Volver a grados
            </button>
            
            <h2 id="titulo-grado" class="titulo text-4xl mb-8 text-center"></h2>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Inglés -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Inglés')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/7344f9e9-92b0-4866-83ec-e516c26697d5.png" alt="Globo terráqueo con marcadores de países de habla inglesa y banderas" class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Inglés</h3>
                    <p class="text-gray-700 text-center">Aprende vocabulario y gramática en inglés</p>
                </div>
                
                <!-- Matemática -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Matemática')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/44310e98-8556-42b5-bd9e-948d44db06f6.png" alt="Cálculos matemáticos con números grandes y coloridos, incluyendo sumas y restas" class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Matemática</h3>
                    <p class="text-gray-700 text-center">Resuelve problemas y ejercicios matemáticos</p>
                </div>
                
                <!-- Comunicación -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Comunicación')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/780030d2-ad72-4a0c-8056-f8adedc058e0.png" alt="Libro abierto con letras que salen como si estuvieran hablando" class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Comunicación</h3>
                    <p class="text-gray-700 text-center">Mejora tu lectura, escritura y expresión oral</p>
                </div>
                
                <!-- Ciencia y Tecnología -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Ciencia y Tecnología')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/8654c946-2772-4be6-b915-8a6ca2b1cd6f.png" alt="Microscopio rodeado de tubos de ensayo y moléculas flotantes" class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Ciencia y Tecnología</h3>
                    <p class="text-gray-700 text-center">Descubre los misterios de la ciencia</p>
                </div>
                
                <!-- Personal Social -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Personal Social')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/46cdf4a7-6748-4e93-98df-73d1bda51860.png" alt="Grupo diverso de niños de diferentes culturas dándose las manos alrededor de un globo terráqueo" class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Personal Social</h3>
                    <p class="text-gray-700 text-center">Conoce sobre historia, geografía y valores</p>
                </div>

                 <!-- Arte y Cultura -->
                <div class="card bg-white rounded-xl p-6 cursor-pointer" onclick="seleccionarMateria('Arte y Cultura')">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0e0de5b8-070c-41c1-8d90-52b1b380cf19.png"  alt="Paleta de colores con pincel representando arte y cultura"  class="mx-auto mb-4 materia-icon">
                    <h3 class="text-xl font-bold mb-2 text-center">Arte y cultura</h3>
                    <p class="text-gray-700 text-center">Conoce sobre Musica, Danza y Artes Visuales</p>
                </div>
            </div> 
        </div>
    </div>
    
    <!-- Pantalla de juego -->
    <div id="juego" class="hidden py-12 px-4">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <button onclick="volverAMaterias()" class="flex items-center text-indigo-600 hover:text-indigo-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Cambiar materia
                </button>
                
                <div class="flex items-center">
                    <span id="puntuacion" class="text-2xl font-bold mr-4">0 pts</span>
                    <div class="w-40 bg-gray-200 rounded-full h-4">
                        <div id="barra-progreso" class="bg-green-500 h-4 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <div id="info-juego" class="mb-6 p-4 bg-white rounded-lg shadow">
                <h2 id="materia-actual" class="text-2xl font-bold"></h2>
                <p id="grado-actual" class="text-gray-600"></p>
            </div>
            
            <div id="pregunta-container" class="p-6 bg-white rounded-xl shadow-lg pregunta-container">
                <h3 id="pregunta-texto" class="text-xl font-bold mb-6"></h3>
                
                <div id="opciones-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Las opciones se llenarán con JavaScript -->
                </div>
            </div>
            
            <div id="feedback-container" class="hidden mt-6 p-4 bg-white rounded-lg shadow-lg">
                <p id="feedback-texto" class="text-xl mb-4"></p>
                <div class="flex justify-between items-center">
                    <img id="feedback-imagen" src="img/10280401.jpg" alt="Ilustración de retroalimentación" class="w-20 h-20 mr-4">
                    <button onclick="siguientePregunta()" class="btn-jugar px-6 py-3 rounded-lg text-white font-bold">
                        Siguiente pregunta
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pantalla de resultados -->
    <div id="resultados" class="hidden py-12 px-4">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="titulo text-4xl mb-8">¡Resultados Finales!</h2>
            
            <div id="resultado-contenido" class="bg-white rounded-xl p-8 shadow-xl max-w-2xl mx-auto">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/3d73f586-248a-4a29-bfa6-f4d2a3c4677b.png" alt="Niño celebrando con las manos en alto al completar un desafío educativo" class="mx-auto mb-6">
                
                <h3 id="resultado-titulo" class="text-2xl font-bold mb-4"></h3>
                <p id="resultado-puntuacion" class="text-xl mb-6"></p>
                <p id="resultado-mensaje" class="text-lg mb-8"></p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="volverAGrados()" class="btn-jugar px-6 py-3 rounded-lg text-white font-bold">
                        Elegir otro grado
                    </button>
                    <button onclick="repetirMateria()" class="btn-jugar px-6 py-3 rounded-lg text-white font-bold bg-indigo-500">
                        Repetir materia
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/preguntas.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="js/funciones.js"></script>
    <script src="js/particulas.js"></script>
</body>
</html>
 